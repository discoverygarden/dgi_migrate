---
services:
  dgi_migrate.route_subscriber:
    class: Drupal\dgi_migrate\Routing\RouteSubscriber
    tags:
      - name: event_subscriber
  plugin.manager.dgi_migrate.locker:
    class: \Drupal\dgi_migrate\LockerPluginManager
    parent: default_plugin_manager
  dgi_migrate.event_subscriber.defer_immediate_indexing_during_migrations:
    class: Drupal\dgi_migrate\EventSubscriber\MigrationImmediateIndexingDeferralEventSubscriber
    autowire: true
    tags:
      - { name: event_subscriber }
  dgi_migrate.migrate_stub.event_wrapper:
    class: Drupal\dgi_migrate\MigrateStubEventWrapper
    decorates: migrate.stub
    arguments:
      - '@.inner'
      - '@plugin.manager.migration'
      - '@event_dispatcher'
      - '@dgi_migrate.migrate_message'
  dgi_migrate.migrate_message:
    class: Drupal\migrate\MigrateMessage
